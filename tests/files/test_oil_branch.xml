<?xml version="1.0" encoding="UTF-8"?>
<Model xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../opgee/etc/opgee.xsd">

	<Analysis name="test_oil_branch">
		<A name="functional_unit">oil</A>
		<A name="energy_basis">LHV</A>
	  <A name="GWP_horizon">100</A>
	  <A name="GWP_version">AR5</A>
		<Field name="oil_stabilization"/>
		<Field name="heavy_oil_upgrading"/>
		<Field name="heavy_oil_diluent"/>
		<Field name="bitumen_dilution"/>
	</Analysis>

	<Field name="oil_stabilization">
		<A name="country">USA</A>

		<Process class="Before" desc="">
			<Produces>oil for stabilization</Produces>
		</Process>
		
		<Process class="CrudeOilStabilization">
			<Consumes>crude oil</Consumes>
			<Produces>crude oil</Produces>
			<Produces>gas</Produces>
			<Produces>gas fugitives</Produces>
		</Process>

		<Process class="CrudeOilStorage">
			<Consumes>crude oil</Consumes>
		</Process>


		<Stream src="Reservoir" dst="Before"/>
		<Stream src="Before" dst="CrudeOilStabilization" name="before to crude oil stabilization">
			<Contains>oil for stabilization</Contains>
			<Component name="oil" phase="liquid">276.5386546</Component>
			<A name="temperature">90</A>
			<A name="pressure">100</A>
		</Stream>

		<Stream src="CrudeOilStabilization" dst="CrudeOilStorage" name="crude oil stabilization to crude oil storage">
			<Contains>oil for storage</Contains>
		</Stream>

		<Stream src="CrudeOilStabilization" dst="Environment" name="gas fugitives from stabilization">
			<Contains>gas fugitives</Contains>
		</Stream>

		<Stream src="CrudeOilStabilization" dst="Output" name="gas from stabilization">
			<Contains>gas from stabilization</Contains>
		</Stream>

	</Field>

	<Field name="heavy_oil_upgrading">
		<A name="country">USA</A>
		<A name="API">8.6</A>
		<A name="crude_oil_dewatering_output">HeavyOilUpgrading</A>
		<A name="upgrader_type">Delayed coking</A>

		<Process class="Before" desc="" impute-start="true">
			<Produces>oil for stabilization</Produces>
		</Process>

		<Process class="CrudeOilStabilization" enabled="false">
			<Consumes>crude oil</Consumes>
			<Produces>crude oil</Produces>
			<Produces>gas</Produces>
			<Produces>gas fugitives</Produces>
		</Process>

		<Process class="HeavyOilUpgrading"/>

		<Process class="CrudeOilStorage" enabled="false">
			<Consumes>crude oil</Consumes>
		</Process>

		<Process class="HeavyOilDilution" enabled="false"/>
		<Process class="BitumenMining" enabled="false"/>

		<Stream src="Reservoir" dst="Before"/>

		<Stream src="Before" dst="HeavyOilUpgrading" name="before to heavy oil upgrading">
			<Contains>oil for upgrading</Contains>
			<Component name="oil" phase="liquid">21043.6</Component>
			<A name="temperature">165.0</A>
			<A name="pressure">100.0</A>
		</Stream>

		<Stream src="Output" dst="HeavyOilUpgrading" name="output to heavy oil upgrading">
			<Contains>gas for upgrading</Contains>
			<Component name="N2" phase="gas">5.1003</Component>
			<Component name="CO2" phase="gas">0.0416</Component>
			<Component name="C1" phase="gas">736.7043</Component>
			<Component name="C2" phase="gas">28.7480</Component>
			<Component name="C3" phase="gas">19.9757</Component>
			<Component name="C4" phase="gas">0.0244</Component>
			<A name="temperature">90.0</A>
			<A name="pressure">150.0</A>
		</Stream>

		<Stream src="HeavyOilUpgrading" dst="Output" name="heavy oil upgrading to Output">
			<Contains>process gas</Contains>
		</Stream>

	</Field>

	<Field name='heavy_oil_diluent'>
		<A name="country">USA</A>
		<A name="API">8.0</A>
		<A name="oil_prod">83709.0</A>
		<A name="GOR">132.23</A>
		<A name="fraction_diluent">0.398</A>
		<A name="crude_oil_dewatering_output">HeavyOilDilution</A>

		<Process class="Before">
			<Produces>oil for stabilization</Produces>
		</Process>

		<Process class="After"/>

		<Process class="HeavyOilDilution" impute-start="true"/>
		<Process class="BitumenMining"/>
		<Process class="DiluentTransport"/>

		<Stream src="Reservoir" dst="Before"/>

		<Stream src="HeavyOilDilution" dst="After" name="heavy oil dilution to after">
			<Contains>oil for storage</Contains>
		</Stream>

		<Stream src="Before" dst="HeavyOilDilution" name="before to heavy oil dilution">
			<Contains>oil for dilution</Contains>
			<Component name="oil" phase="liquid">12928.2</Component>
			<A name="temperature">165.0</A>
			<A name="pressure">100.0</A>
		</Stream>
		
		<Stream src="DiluentTransport" dst="HeavyOilDilution" name="dilution transport to heavy oil dilution">
			<Contains>oil for dilution</Contains>
		</Stream>

		<Stream src="Before" dst="DiluentTransport" name="before to diluent transport">
			<Contains>oil</Contains>
		</Stream>

		<Stream src="BitumenMining" dst="HeavyOilDilution" name="bitumen mining to heavy oil dilution">
			<Contains>oil for dilution</Contains>
		</Stream>
	</Field>

	<Field name='bitumen_dilution'>
		<A name="country">USA</A>
		<A name="API">15.0</A>
		<A name="oil_prod">2098.0</A>
		<A name="GOR">100.0</A>
		<A name="fraction_diluent">0.1</A>

		<Process class="Before">
			<Produces>oil for stabilization</Produces>
		</Process>

		<Process class="After"/>

		<Process class="HeavyOilDilution" impute-start="true"/>
		<Process class="BitumenMining"/>
		<Process class="DiluentTransport"/>

		<Stream src="Reservoir" dst="Before"/>

		<Stream src="HeavyOilDilution" dst="After" name="heavy oil dilution to after">
			<Contains>oil for storage</Contains>
		</Stream>

		<Stream src="Before" dst="HeavyOilDilution" name="before to heavy oil dilution">
			<Contains>oil for dilution</Contains>
			<Component name="oil" phase="liquid">12928.2</Component>
			<A name="temperature">165.0</A>
			<A name="pressure">100.0</A>
		</Stream>

		<Stream src="DiluentTransport" dst="HeavyOilDilution" name="dilution transport to heavy oil dilution">
			<Contains>oil for dilution</Contains>
		</Stream>

		<Stream src="Before" dst="DiluentTransport" name="before to diluent transport">
			<Contains>oil</Contains>
		</Stream>

		<Stream src="BitumenMining" dst="HeavyOilDilution" name="bitumen mining to heavy oil dilution">
			<Contains>oil for dilution</Contains>
		</Stream>
	</Field>
</Model>
